import tabsService from"./src/services/tabsService";let contextMenusCreated=!1;contextMenusCreated||(chrome.contextMenus.create({id:"close_all_tabs",title:"Close All Tabs",contexts:["all"]}),chrome.contextMenus.create({id:"group_selected_tabs",title:"Group Selected Tabs",contexts:["all"]}),chrome.contextMenus.create({id:"close_tabs_from_domain",title:"Close Tabs from Domain...",contexts:["all"]}),chrome.contextMenus.create({id:"get_all_tabs",title:"Get All Open Tabs",contexts:["all"]}),contextMenusCreated=!0),chrome.contextMenus.onClicked.addListener((e=>{if("close_all_tabs"===e.menuItemId)tabsService.closeAllTabs();else if("group_selected_tabs"===e.menuItemId)chrome.storage.local.get(["selectedTabIds"],(e=>{const t=e.selectedTabIds||[];tabsService.groupTabs(t)}));else if("close_tabs_from_domain"===e.menuItemId){const e=prompt("Enter the domain to close tabs (e.g., example.com):");e&&tabsService.closeTabsFromDomain(e)}else"get_all_tabs"===e.menuItemId&&tabsService.getAllTabs((e=>{console.log("Currently open tabs:",e);const t=e.map((e=>e.title)).join("\n");chrome.notifications.create({type:"basic",title:"Currently Open Tabs",message:t,priority:2})}))})),chrome.runtime.onMessage.addListener(((e,t,s)=>{if("getAllTabs"===e.action)tabsService.actiongetAllTabs((e=>{s({tabs:e})}));else if("closeTabsFromDomain"===e.action)tabsService.closeTabsFromDomain(e.domain),s({status:"Closing tabs from "+e.domain});else if("closeAllTabs"===e.action)tabsService.closeAllTabs(),s({status:"All tabs closed"});else if("groupAllTabs"===e.action){const t=e.tabIds||[];tabsService.groupTabs(t),s({status:"Grouped tabs."})}return s({status:"success"}),!0})),chrome.tabs.onUpdated.addListener(((e,t,s)=>{"complete"===t.status&&s.url&&console.log("Tab updated: ",s.url)})),chrome.runtime.onInstalled.addListener((()=>{console.log("Tab Manager Extension installed.")})),chrome.runtime.onStartup.addListener((()=>{console.log("Tab Manager extension started.")}));